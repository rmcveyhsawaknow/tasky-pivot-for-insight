digraph G {
  rankdir = "RL";
  node [shape = rect, fontname = "sans-serif"];
  "data.aws_availability_zones.available" [label="data.aws_availability_zones.available"];
  "data.aws_caller_identity.current" [label="data.aws_caller_identity.current"];
  subgraph "cluster_module.alb" {
    label = "module.alb"
    fontname = "sans-serif"
    "module.alb.aws_lb.main" [label="aws_lb.main"];
    "module.alb.aws_lb_listener.http" [label="aws_lb_listener.http"];
    "module.alb.aws_lb_listener.https" [label="aws_lb_listener.https"];
    "module.alb.aws_lb_target_group.app" [label="aws_lb_target_group.app"];
    "module.alb.aws_route53_record.app" [label="aws_route53_record.app"];
    "module.alb.aws_security_group.alb" [label="aws_security_group.alb"];
    "module.alb.aws_security_group_rule.alb_to_eks" [label="aws_security_group_rule.alb_to_eks"];
  }
  subgraph "cluster_module.eks" {
    label = "module.eks"
    fontname = "sans-serif"
    "module.eks.data.aws_iam_policy_document.aws_load_balancer_controller_assume_role_policy" [label="data.aws_iam_policy_document.aws_load_balancer_controller_assume_role_policy"];
    "module.eks.data.tls_certificate.eks" [label="data.tls_certificate.eks"];
    "module.eks.aws_eks_addon.coredns" [label="aws_eks_addon.coredns"];
    "module.eks.aws_eks_addon.ebs_csi" [label="aws_eks_addon.ebs_csi"];
    "module.eks.aws_eks_addon.kube_proxy" [label="aws_eks_addon.kube_proxy"];
    "module.eks.aws_eks_addon.vpc_cni" [label="aws_eks_addon.vpc_cni"];
    "module.eks.aws_eks_cluster.main" [label="aws_eks_cluster.main"];
    "module.eks.aws_eks_node_group.main" [label="aws_eks_node_group.main"];
    "module.eks.aws_iam_openid_connect_provider.eks" [label="aws_iam_openid_connect_provider.eks"];
    "module.eks.aws_iam_policy.aws_load_balancer_controller" [label="aws_iam_policy.aws_load_balancer_controller"];
    "module.eks.aws_iam_role.aws_load_balancer_controller" [label="aws_iam_role.aws_load_balancer_controller"];
    "module.eks.aws_iam_role.eks_cluster" [label="aws_iam_role.eks_cluster"];
    "module.eks.aws_iam_role.eks_node_group" [label="aws_iam_role.eks_node_group"];
    "module.eks.aws_iam_role_policy_attachment.aws_load_balancer_controller_attach" [label="aws_iam_role_policy_attachment.aws_load_balancer_controller_attach"];
    "module.eks.aws_iam_role_policy_attachment.eks_cluster_policy" [label="aws_iam_role_policy_attachment.eks_cluster_policy"];
    "module.eks.aws_iam_role_policy_attachment.eks_cni_policy" [label="aws_iam_role_policy_attachment.eks_cni_policy"];
    "module.eks.aws_iam_role_policy_attachment.eks_container_registry_policy" [label="aws_iam_role_policy_attachment.eks_container_registry_policy"];
    "module.eks.aws_iam_role_policy_attachment.eks_worker_node_policy" [label="aws_iam_role_policy_attachment.eks_worker_node_policy"];
    "module.eks.aws_security_group.eks_additional" [label="aws_security_group.eks_additional"];
    "module.eks.aws_security_group_rule.mongodb_from_eks_additional" [label="aws_security_group_rule.mongodb_from_eks_additional"];
    "module.eks.aws_security_group_rule.mongodb_from_eks_cluster" [label="aws_security_group_rule.mongodb_from_eks_cluster"];
  }
  subgraph "cluster_module.mongodb_ec2" {
    label = "module.mongodb_ec2"
    fontname = "sans-serif"
    "module.mongodb_ec2.data.aws_ami.amazon_linux_2" [label="data.aws_ami.amazon_linux_2"];
    "module.mongodb_ec2.aws_cloudwatch_log_group.mongodb" [label="aws_cloudwatch_log_group.mongodb"];
    "module.mongodb_ec2.aws_iam_instance_profile.mongodb" [label="aws_iam_instance_profile.mongodb"];
    "module.mongodb_ec2.aws_iam_role.mongodb" [label="aws_iam_role.mongodb"];
    "module.mongodb_ec2.aws_iam_role_policy_attachment.mongodb_admin" [label="aws_iam_role_policy_attachment.mongodb_admin"];
    "module.mongodb_ec2.aws_instance.mongodb" [label="aws_instance.mongodb"];
    "module.mongodb_ec2.aws_security_group.mongodb" [label="aws_security_group.mongodb"];
  }
  subgraph "cluster_module.s3_backup" {
    label = "module.s3_backup"
    fontname = "sans-serif"
    "module.s3_backup.aws_s3_bucket.backup" [label="aws_s3_bucket.backup"];
    "module.s3_backup.aws_s3_bucket_lifecycle_configuration.backup" [label="aws_s3_bucket_lifecycle_configuration.backup"];
    "module.s3_backup.aws_s3_bucket_policy.backup_public_read" [label="aws_s3_bucket_policy.backup_public_read"];
    "module.s3_backup.aws_s3_bucket_public_access_block.backup" [label="aws_s3_bucket_public_access_block.backup"];
    "module.s3_backup.aws_s3_bucket_versioning.backup" [label="aws_s3_bucket_versioning.backup"];
    "module.s3_backup.random_string.bucket_suffix" [label="random_string.bucket_suffix"];
  }
  subgraph "cluster_module.vpc" {
    label = "module.vpc"
    fontname = "sans-serif"
    "module.vpc.data.aws_region.current" [label="data.aws_region.current"];
    "module.vpc.aws_eip.nat" [label="aws_eip.nat"];
    "module.vpc.aws_internet_gateway.main" [label="aws_internet_gateway.main"];
    "module.vpc.aws_nat_gateway.main" [label="aws_nat_gateway.main"];
    "module.vpc.aws_route_table.private" [label="aws_route_table.private"];
    "module.vpc.aws_route_table.public" [label="aws_route_table.public"];
    "module.vpc.aws_route_table_association.private" [label="aws_route_table_association.private"];
    "module.vpc.aws_route_table_association.public" [label="aws_route_table_association.public"];
    "module.vpc.aws_security_group.vpc_endpoints" [label="aws_security_group.vpc_endpoints"];
    "module.vpc.aws_subnet.private" [label="aws_subnet.private"];
    "module.vpc.aws_subnet.public" [label="aws_subnet.public"];
    "module.vpc.aws_vpc.main" [label="aws_vpc.main"];
    "module.vpc.aws_vpc_endpoint.ec2" [label="aws_vpc_endpoint.ec2"];
    "module.vpc.aws_vpc_endpoint.s3" [label="aws_vpc_endpoint.s3"];
  }
  "module.alb.aws_lb.main" -> "module.alb.aws_security_group.alb";
  "module.alb.aws_lb.main" -> "module.s3_backup.aws_s3_bucket.backup";
  "module.alb.aws_lb.main" -> "module.vpc.aws_subnet.public";
  "module.alb.aws_lb_listener.http" -> "module.alb.aws_lb.main";
  "module.alb.aws_lb_listener.http" -> "module.alb.aws_lb_target_group.app";
  "module.alb.aws_lb_listener.https" -> "module.alb.aws_lb.main";
  "module.alb.aws_lb_listener.https" -> "module.alb.aws_lb_target_group.app";
  "module.alb.aws_lb_target_group.app" -> "module.vpc.aws_vpc.main";
  "module.alb.aws_route53_record.app" -> "module.alb.aws_lb.main";
  "module.alb.aws_security_group.alb" -> "module.vpc.aws_vpc.main";
  "module.alb.aws_security_group_rule.alb_to_eks" -> "module.alb.aws_security_group.alb";
  "module.alb.aws_security_group_rule.alb_to_eks" -> "module.eks.aws_eks_cluster.main";
  "module.eks.data.aws_iam_policy_document.aws_load_balancer_controller_assume_role_policy" -> "module.eks.aws_iam_openid_connect_provider.eks";
  "module.eks.data.tls_certificate.eks" -> "module.eks.aws_eks_cluster.main";
  "module.eks.aws_eks_addon.coredns" -> "module.eks.aws_eks_node_group.main";
  "module.eks.aws_eks_addon.ebs_csi" -> "module.eks.aws_eks_cluster.main";
  "module.eks.aws_eks_addon.kube_proxy" -> "module.eks.aws_eks_cluster.main";
  "module.eks.aws_eks_addon.vpc_cni" -> "module.eks.aws_eks_cluster.main";
  "module.eks.aws_eks_cluster.main" -> "module.eks.aws_iam_role_policy_attachment.eks_cluster_policy";
  "module.eks.aws_eks_cluster.main" -> "module.eks.aws_security_group.eks_additional";
  "module.eks.aws_eks_cluster.main" -> "module.vpc.aws_subnet.private";
  "module.eks.aws_eks_cluster.main" -> "module.vpc.aws_subnet.public";
  "module.eks.aws_eks_node_group.main" -> "module.eks.aws_eks_cluster.main";
  "module.eks.aws_eks_node_group.main" -> "module.eks.aws_iam_role_policy_attachment.eks_cni_policy";
  "module.eks.aws_eks_node_group.main" -> "module.eks.aws_iam_role_policy_attachment.eks_container_registry_policy";
  "module.eks.aws_eks_node_group.main" -> "module.eks.aws_iam_role_policy_attachment.eks_worker_node_policy";
  "module.eks.aws_iam_openid_connect_provider.eks" -> "module.eks.data.tls_certificate.eks";
  "module.eks.aws_iam_role.aws_load_balancer_controller" -> "module.eks.data.aws_iam_policy_document.aws_load_balancer_controller_assume_role_policy";
  "module.eks.aws_iam_role_policy_attachment.aws_load_balancer_controller_attach" -> "module.eks.aws_iam_policy.aws_load_balancer_controller";
  "module.eks.aws_iam_role_policy_attachment.aws_load_balancer_controller_attach" -> "module.eks.aws_iam_role.aws_load_balancer_controller";
  "module.eks.aws_iam_role_policy_attachment.eks_cluster_policy" -> "module.eks.aws_iam_role.eks_cluster";
  "module.eks.aws_iam_role_policy_attachment.eks_cni_policy" -> "module.eks.aws_iam_role.eks_node_group";
  "module.eks.aws_iam_role_policy_attachment.eks_container_registry_policy" -> "module.eks.aws_iam_role.eks_node_group";
  "module.eks.aws_iam_role_policy_attachment.eks_worker_node_policy" -> "module.eks.aws_iam_role.eks_node_group";
  "module.eks.aws_security_group.eks_additional" -> "module.mongodb_ec2.aws_security_group.mongodb";
  "module.eks.aws_security_group_rule.mongodb_from_eks_additional" -> "module.eks.aws_security_group.eks_additional";
  "module.eks.aws_security_group_rule.mongodb_from_eks_cluster" -> "module.eks.aws_eks_cluster.main";
  "module.mongodb_ec2.aws_iam_instance_profile.mongodb" -> "module.mongodb_ec2.aws_iam_role.mongodb";
  "module.mongodb_ec2.aws_iam_role_policy_attachment.mongodb_admin" -> "module.mongodb_ec2.aws_iam_role.mongodb";
  "module.mongodb_ec2.aws_instance.mongodb" -> "module.mongodb_ec2.data.aws_ami.amazon_linux_2";
  "module.mongodb_ec2.aws_instance.mongodb" -> "module.mongodb_ec2.aws_iam_instance_profile.mongodb";
  "module.mongodb_ec2.aws_instance.mongodb" -> "module.mongodb_ec2.aws_security_group.mongodb";
  "module.mongodb_ec2.aws_instance.mongodb" -> "module.s3_backup.aws_s3_bucket.backup";
  "module.mongodb_ec2.aws_instance.mongodb" -> "module.vpc.aws_subnet.private";
  "module.mongodb_ec2.aws_security_group.mongodb" -> "module.vpc.aws_vpc.main";
  "module.s3_backup.aws_s3_bucket.backup" -> "module.s3_backup.random_string.bucket_suffix";
  "module.s3_backup.aws_s3_bucket_lifecycle_configuration.backup" -> "module.s3_backup.aws_s3_bucket.backup";
  "module.s3_backup.aws_s3_bucket_policy.backup_public_read" -> "module.s3_backup.aws_s3_bucket_public_access_block.backup";
  "module.s3_backup.aws_s3_bucket_public_access_block.backup" -> "module.s3_backup.aws_s3_bucket.backup";
  "module.s3_backup.aws_s3_bucket_versioning.backup" -> "module.s3_backup.aws_s3_bucket.backup";
  "module.vpc.aws_eip.nat" -> "data.aws_availability_zones.available";
  "module.vpc.aws_eip.nat" -> "module.vpc.aws_internet_gateway.main";
  "module.vpc.aws_internet_gateway.main" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_nat_gateway.main" -> "module.vpc.aws_eip.nat";
  "module.vpc.aws_nat_gateway.main" -> "module.vpc.aws_subnet.public";
  "module.vpc.aws_route_table.private" -> "module.vpc.aws_nat_gateway.main";
  "module.vpc.aws_route_table.public" -> "module.vpc.aws_internet_gateway.main";
  "module.vpc.aws_route_table_association.private" -> "module.vpc.aws_route_table.private";
  "module.vpc.aws_route_table_association.private" -> "module.vpc.aws_subnet.private";
  "module.vpc.aws_route_table_association.public" -> "module.vpc.aws_route_table.public";
  "module.vpc.aws_route_table_association.public" -> "module.vpc.aws_subnet.public";
  "module.vpc.aws_security_group.vpc_endpoints" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.private" -> "data.aws_availability_zones.available";
  "module.vpc.aws_subnet.private" -> "module.vpc.aws_vpc.main";
  "module.vpc.aws_subnet.public" -> "data.aws_availability_zones.available";
  "module.vpc.aws_subnet.public" -> "module.vpc.aws_internet_gateway.main";
  "module.vpc.aws_vpc_endpoint.ec2" -> "module.vpc.data.aws_region.current";
  "module.vpc.aws_vpc_endpoint.ec2" -> "module.vpc.aws_security_group.vpc_endpoints";
  "module.vpc.aws_vpc_endpoint.ec2" -> "module.vpc.aws_subnet.private";
  "module.vpc.aws_vpc_endpoint.s3" -> "module.vpc.data.aws_region.current";
  "module.vpc.aws_vpc_endpoint.s3" -> "module.vpc.aws_route_table.private";
}
